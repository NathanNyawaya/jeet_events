<!DOCTYPE html>
<html translate="no" data-dpr="1" style="font-size: 48.24px;">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="robots" content="noindex,nofollow">
    <meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" name="viewport">
    <title>PlayWin</title>
    <link href="/css/promotion/app.css" rel="stylesheet" />
    <link href="/css/promotion/chunk-0_1.css" rel="stylesheet" />
    <link href="/css/promotion/chunk-0_2.css" rel="stylesheet" />
    <link href="/css/promotion/chunk-0_3.css" rel="stylesheet" />
    <link href="/css/promotion/chunk-0_4.css" rel="stylesheet" />
    <link href="/css/promotion/chunk-0_5.css" rel="stylesheet" />
    <link href="/css/promotion/chunk-0_6.css" rel="stylesheet" />
    <link rel="shortcut icon" href="/images2/myjeet_win_logo.ico" type="image/x-icon">
    <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
  />
    <style>
        html,
        body {
            height: 100%;
            width: 100%;
            background-color: #0c0c0f;
            padding: 0;
            margin: 0;
        }
        canvas {
            height: 130px;
        }

        .input-group {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }

        .input-group .form-control {
            height: 40px;
            width: 100%;
            padding: 10px 15px;
            font-size: 1rem;
            border: 1px solid #ced4da;
            border-radius: 0.25rem;
            outline: none;
            transition: border-color 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        }

        .input-group .form-control:focus {
            border-color: #80bdff;
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.25);
        }

        .input-group .btn {
            height: 40px;
            padding: 0 15px;
            font-size: 1rem;
            border: 1px solid #ced4da;
            border-radius: 0.25rem;
            background-color: #f8f9fa;
            color: #495057;
            cursor: pointer;
            transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out, border-color 0.3s ease-in-out;
        }

        .input-group .btn:hover {
            background-color: #e2e6ea;
            border-color: #dae0e5;
            color: #212529;
        }

        .input-group .btn:active {
            background-color: #dae0e5;
            border-color: #d3d9df;
            color: #212529;
        }

        .input-group .btn:focus {
            border-color: #80bdff;
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.25);
            outline: none;
        }


        /* Remove border-radius from top-left and bottom-left corners */
.btna {
    border-radius: 0.25rem; /* Keep the default border-radius */
}

/* Remove border-radius from top-left corner */
.btna:not(:last-child) {
    border-top-left-radius: 0;
}

/* Remove border-radius from bottom-left corner */
.btna:not(:first-child) {
    border-bottom-left-radius: 0;
}


/* Remove border-radius from top-right and bottom-right corners of input field */
.form-controla {
    border-radius: 0.25rem; /* Keep the default border-radius */
}

/* Remove border-radius from top-right corner */
.form-controla:not(:last-child) {
    border-top-right-radius: 0;
}

/* Remove border-radius from bottom-right corner */
.form-controla:not(:first-child) {
    border-bottom-right-radius: 0;
}


    </style>
</head>

<body style="font-size: 12px;">
    <div id="app">
        <div data-v-7c8bbbf4="" class="mian">
            <div data-v-106b99c8="" data-v-7c8bbbf4="" class="navbar">
                <div data-v-106b99c8="" class="navbar-left"></div>
                <div data-v-106b99c8="" class="navbar-title" style="color:#EFD586; letter-spacing: 0.9px;">PROMOTION AGENT</div>
                <div data-v-106b99c8="" class="navbar-right" onclick="location.href='/promotion/bonusrecord'">
                    <div data-v-7c8bbbf4="" data-v-106b99c8="" class="c-row" style="color:#EFD586">
                        <i data-v-7c8bbbf4="" data-v-106b99c8="" class="van-icon van-icon-notes-o" style="font-size: 25px;"></i>
                    </div>
                </div>
            </div>
            <div data-v-7c8bbbf4="" class="promotion" style="border-bottom: 1px solid black">
                <div data-v-7c8bbbf4="" class="tab" style="background-color: #EFD586;">
                    <ul data-v-7c8bbbf4="" class="c-row c-row-between">
                        <li data-v-7c8bbbf4="" onclick="location.href='/promotion'" class="action block-click">Overview</li>
                        <li data-v-7c8bbbf4="" onclick="location.href='/promotion/myTeam'">My Team</li>
                    </ul>
                </div>
                <div data-v-7c8bbbf4="" class="box">
                    <div data-v-7c8bbbf4="" class="tit">Guide</div>
                    <div data-v-7c8bbbf4="" class="info">
                        <div style="margin-top: 20px;gap:20px;display: flex; flex-direction: column; justify-content: space-between; align-items: center;" data-v-7c8bbbf4="" class="info-data c-row c-row-between m-b-20">
                            <div data-v-7c8bbbf4="" class="left">
                                <h5 data-v-7c8bbbf4="" class="all" style="font-size: 0.5rem; color: #efd58c; font-weight: bold;">Total Team Members</h5>
                                <p data-v-7c8bbbf4="" class="num" id="total_sub">0</p>
                                <p data-v-7c8bbbf4="" class="txt" id="total_rech">Team total deposit:0</p>
                                <p data-v-7c8bbbf4="" class="txt" id="today_rech">Team deposit commission: 0</p>
                            </div>
                            <div data-v-7c8bbbf4="" class="right" style="height: 60%;">
                                <p data-v-7c8bbbf4="" class="txt" style="font-size: 0.5rem; line-height: 25px;">Team Total Betting:<br><span style="font-size: .43333rem !important;" data-v-7c8bbbf4="" class="num" id="total_with">0</span></p>
                                <br><br>
                                <p data-v-7c8bbbf4="" class="txt" roses_f style="font-size: 0.5rem; line-height: 25px;">Team Betting Commission:<br><span style="font-size: .43333rem !important; margin-top: 5px;" data-v-7c8bbbf4="" class="num" id="today_with">0</span></p>
                            </div>
                        </div>
                        <div style="padding: 0 15px; margin-top: 30px; display: flex;justify-content: center;" data-v-7c8bbbf4="" class="info-img c-row c-row-between">
                            <div data-v-7c8bbbf4="" class="btn-list c-row c-row-middle-center" style="width: 70%;">
                                <div data-v-7c8bbbf4="" class="btn-box">
                                    <form id="referralCodeForm" style="margin-bottom: 20px;">
                                        <div class="input-group mb-3">

                                            
                                            <input type="text" id="referralCodeInput" class="form-control form-controla" placeholder="Enter Referral Code"  aria-label="Referral Code" style="font-size: small; color:#0c0c0f;">

                                            <button style="
                                            width: 25%;
                                            display: flex;
                                            align-items: center;
                                            padding: 0px;
                                            margin: 0px;
                                            justify-content: center;
                                            color: green;
                                        "  class="btn btn-default btn-save-code btna" data-id="5"><i class="fa fa-check" style="color: #19875;"></i></button>
                                        </div>
                                    </form>
                                    <div data-v-7c8bbbf4="" class="btn m-b-10 c-row c-row-middle-center tag-read btnC" data-clipboard-text="" style="cursor: pointer;">Copy Link</div>
                                    <!-- <div data-v-7c8bbbf4="" data-clipboard-text="" class="btn m-b-10 c-row c-row-middle-center tag-read btnC" style="cursor: pointer;">Copy Link</div> -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
           </div>
           <%- include('../nav') -%>
       <div data-v-7692a079="" data-v-3966082f="" class="Loading c-row c-row-middle-center">
           <div data-v-7692a079="" class="van-loading van-loading--circular">
               <span data-v-7692a079="" class="van-loading__spinner van-loading__spinner--circular" style="color: #efd58c;">
                   <svg data-v-7692a079="" viewBox="25 25 50 50" class="van-loading__circular">
                       <circle data-v-7692a079="" cx="50" cy="50" r="20" fill="none"></circle>
                   </svg>
               </span>
           </div>
       </div>
       </div>
       <!---->
       
   </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/davidshimjs/qrcodejs@master/qrcode.js"></script>
<script src="/js/client.js"></script>
<script>
   $(document).ready(function() {
       function alertMess(text, sic) {
           $('body').append(
               `
<div data-v-1dcba851="" class="msg">
<div data-v-1dcba851="" class="msg-content v-enter-active v-enter-to" style=""> ${text} </div>
</div>
`
           );
           setTimeout(() => {
               $('.msg .msg-content').removeClass('v-enter-active v-enter-to');
               $('.msg .msg-content').addClass('v-leave-active v-leave-to');
               setTimeout(() => {
                   $('.msg').remove();
               }, 100);
               sic.removeClass('block-click');
           }, 1000);
       }

       // Handle Copy Referral Code button click
       $('.btn-box .btnC').click(function(e) {
            e.preventDefault();
            $(this).addClass('block-click');
            var clipboardText = $(this).attr('data-clipboard-text');
            console.log(clipboardText);
            var tempTextArea = $('<textarea>');
            tempTextArea.val(clipboardText);
            tempTextArea.css({position: 'fixed', top: '0', left: '0', opacity: '0'});
            $('body').append(tempTextArea);
            tempTextArea[0].select();
            document.execCommand('copy');
            alertMess('Copy successful', $(this));
        });


     // Handle Save button click
     $('.btn-save-code').click(function(e) {
        e.preventDefault();
        var newCode = $('#referralCodeInput').val();
        if (newCode) {
            // AJAX request to update the referral code
            $.ajax({
                type: "POST",
                url: "/api/webapi/updateReferralCode",
                data: { code: newCode }, // Send the new referral code to the server
                dataType: "json",
                success: function(response) {
                    console.log(response);
                    if (response.status) { // Check if status is true
                        // Update the references locally
                        $('.btn-box .btn:eq(0)').attr('data-clipboard-text', response.code);
                        $('.btn-box .btn:eq(1)').attr('data-clipboard-text', 'http://' + window.location.hostname + `/register?r_code=${response.code}`);
                        alertMess('Referral code updated', $('#referralCodeForm'));
                    } else {
                        alertMess('Failed to update referral code', $('#referralCodeForm'));
                    }
                },
                error: function(xhr, status, error) {
                    console.log(error);
                    alertMess('An Error occurred. Try Again with a different code', $('#referralCodeForm'));
                    console.error(xhr.responseText);
                }
            });
        } else {
            alertMess('Please enter a referral code', $('#referralCodeForm'));
        }
    });
    //    // Handle Save button click
    //    $('#referralCodeForm').submit(function(e) {
    //         e.preventDefault();
    //         var newCode = $('#referralCodeInput').val();
    //         if (newCode) {
    //             $('.btn-box .btn:eq(0)').attr('data-clipboard-text', newCode);
    //             $('.btn-box .btn:eq(1)').attr('data-clipboard-text', 'http://' + window.location.hostname + `/register?r_code=${newCode}`);
    //             alertMess('Referral code updated', $('#referralCodeForm'));
    //         } else {
    //             alertMess('Please enter a referral code', $('#referralCodeForm'));
    //         }
    //     });

   });
</script>
<script>
   function RosesRender(datas) {
       let html = datas.map((e) => {
           let html = '';
           return html += `<div data-v-7c8bbbf4="" class="bd van-row">
                   <div data-v-7c8bbbf4="" class="c-tc van-ellipsis van-col van-col--6">Level ${e.level}</div>
                   <div data-v-7c8bbbf4="" class="c-tc van-col van-col--4">${e.f1}%</div>
                   <div data-v-7c8bbbf4="" class="c-tc van-col van-col--4">${e.f2}%</div>
                   <div data-v-7c8bbbf4="" class="c-tc van-col van-col--5">${e.f3}%</div>
                   <div data-v-7c8bbbf4="" class="c-tc van-col van-col--5">${e.f4}%</div>
               </div>`;
       });
       $('.table:eq(1) .box').append(html);

       $('.table:eq(1) .box').append(`
           <div data-v-7c8bbbf4="" class="bd van-row">
               <div data-v-7c8bbbf4="" class="c-tc fw van-col van-col--6">...</div>
               <div data-v-7c8bbbf4="" class="c-tc fw van-col van-col--4">...</div>
               <div data-v-7c8bbbf4="" class="c-tc fw van-col van-col--4">...</div>
               <div data-v-7c8bbbf4="" class="c-tc fw van-col van-col--5">...</div>
               <div data-v-7c8bbbf4="" class="c-tc fw van-col van-col--5">...</div>
           </div>
           `);
   }
   $.ajax({
       type: "POST",
       url: "/api/webapi/promotion",
       data: {},
       dataType: "json",
       success: function (response) {
           $('.Loading').fadeOut(0);
           $('#total_sub').text(response.invite.f1);
           $('#today_sub').text(response.invite.roses_today);
           $('#total_with').text(response.invite.f1_today);
           $('#today_with').text((1/1000)*response.invite.f1_today);

           $('#total_rech').text("Team total recharge: " + response.invite.roses_f1);
           $('#today_rech').text("Team Recharge commission: " + (1/100)*response.invite.roses_f1);

           if (response.status === false) return location.href = '/home';
           RosesRender(response.level);
           $('.btn-box .btn:eq(0)').attr('data-clipboard-text', response.info[0].code);
           $('.btn-box .btn:eq(1)').attr('data-clipboard-text', 'http://' + window.location.hostname + `/register?r_code=${response.info[0].code}`);
           $('#qrcode').attr('title', 'http://' + window.location.hostname + `/register?r_code=${response.info[0].code}`);
           function makeCode() {
               // qrcode.makeCode(window.location.hostname + `/register?r_code=${response.info[0].code}`);
           }
           makeCode();
       }
   });
</script>
</body>

</html>
